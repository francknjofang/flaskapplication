{% extends 'base.html' %}
{% block titre %}
    <title>Nouvelle carte mémoire</title>
{% endblock %}

{% block body %}
    <h4>Ajouter des cartes :</h4>
     
    <!-- Boucle pour les champs de questions et réponses en fonction du nombre choisi -->
    <div class="d-flex justify-content-center align-items-center" style="background-color: rgba(55, 61, 104, 0.304);">
        {% if card_number %}
            <!-- Deuxième formulaire pour ajouter les cartes -->
            <form method="POST" action="/memory" class="border rounded-3 p-4" style="width: 800px;background-color:rgba(255, 255, 255, 0.866)">
                <div class="mb-3">
                <input type="hidden" id="card_number_hidden" name="card_number_hidden"  value="{{ card_number }}">
                    <label for="module" class="form-label">Nom du module</label>
                    <input type="text" class="form-control" id="module" name="module" aria-describedby="emailHelp">
                </div>
                {% for i in range(card_number) %}
                    <div class="mb-3">
                        <h5>Carte {{ i+1 }}</h5>
                        <div class="form-floating">
                            <textarea class="form-control" name="question{{ i+1 }}" placeholder="Question {{ i+1 }}" id="floatingTextarea{{ i+1 }}" style="height: 100px"></textarea>
                            <label for="floatingTextarea{{ i+1 }}">Question {{ i+1 }}</label><br>
                        </div>
                        
                        <div class="form-floating">
                            <textarea class="form-control" name="Reponse{{ i+1 }}_1" placeholder="Réponse 1" id="floatingTextarea{{ i+1 }}_1" style="height: 100px"></textarea>
                            <label for="floatingTextarea{{ i+1 }}_1">Réponse 1</label><br>
                        </div>
                        <div class="form-floating">
                            <textarea class="form-control" name="Reponse{{ i+1 }}_2" placeholder="Réponse 2" id="floatingTextarea{{ i+1 }}_2" style="height: 100px"></textarea>
                            <label for="floatingTextarea{{ i+1 }}_2">Réponse 2</label><br>
                        </div>
                        <div class="form-floating">
                            <textarea class="form-control" name="Reponse{{ i+1 }}_3" placeholder="Réponse reponse correcte ici" id="floatingTextarea{{ i+1 }}_3" style="height: 100px"></textarea>
                            <label for="floatingTextarea{{ i+1 }}_3">Entrer réponse correcte ici</label><br>
                        </div>
                    </div>
                {% endfor %}
                <button type="submit" class="btn btn-primary">valider</button>
                {% if error %} <p class="fw-bold" style="background-color: rgb(174, 175, 181);color: rgb(147, 15, 15);">{{error}}</p>{% endif %}
            </form>
            <hr>
        {% else %}
            <!-- Premier formulaire pour demander le nombre de cartes -->
            <form method="POST" action="/add" class="border rounded-3 p-4" style="width: 800px;background-color:rgba(255, 255, 255, 0.866)">
                <div class="mb-3">
                    <label for="card_number">Entrez le nombre de cartes à ajouter :</label>
                    <input type="number" id="card_number" name="card_number" min="1" max="10">
                </div>
                <button type="submit" class="btn btn-primary">Valider</button>
                {% if error %} <p class="fw-bold" style="color: rgb(147, 15, 15);">{{error}}</p>{% endif %}
            </form>
        {% endif %}

    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
{% endblock %}
        
    